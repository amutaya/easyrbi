---
output: github_document
---


```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "man/figures/README-",
  out.width = "100%"
)
```

### easyrbi R Package

<!-- badges: start -->
[![Lifecycle: experimental](https://img.shields.io/badge/lifecycle-experimental-orange.svg)](https://lifecycle.r-lib.org/articles/stages.html#experimental)
[![CRAN status](https://www.r-pkg.org/badges/version/SDS270)](https://CRAN.R-project.org/package=SDS270)
<!-- badges: end -->


## Overview

The [`easyrbi`](https://github.com/amutaya/easyrbi) R package consists of functions and datasets that can be used to calculate Richards-Baker Flashiness Index (RBI) trends over time for 301 sites. The main functions are:

1. The sitedata() function retrieves hydrology data for given USGS gauge sites for a specified period.
2. rbi_df() returns calculated RBI values for given USGS sites for a specified period.
3. The trendAnalysis() function perform the MannKendall and sens.slope analysis on a data frame with annual Richards-Baker Flashiness Index (RBI) values. 
4. The trends() function then maps these summary statistics into a one data frame, adds an additional column with the site numbers and removes the summary statistics row for the year variable. The trends() function has the ability to return a data frame containing of length 301 which summary statistics for all 301 sites or a custom number of sites specified by the user.


## Installation

You can install the development version of easyrbi from Github:
```{r, eval=FALSE, message=FALSE}
# If you haven't installed remotes yet, do so:
# install.packages("remotes")
remotes::install_github("amutaya/easyrbi")
```

## Example

```{r example, message=FALSE}
library(easyrbi)
library(tidyverse)
library(trend)
library(Kendall)
library(dataRetrieval)
```
1. This returns a data.frames with 18 variables from the USGS database which include discharge, drainage area and waterYear
```{r, eval = TRUE}
sitedata(c("01564500", "01567000"), "1970-10-01", "1980-09-30") %>% 
  head(10)
```
2. This returns a data.frames with 20 variables from the USGS database which include discharge, drainage area, waterYear and the RBI value
```{r, eval = TRUE}
rbi_df(c("01564500", "01567000"), "1970-10-01", "1980-09-30")
```
3. This returns a character vector with 15 observations that include summary statistics from the Mann-Kendall and sens.slope analysis.
```{r, eval=TRUE}
df <- data.frame (year  = seq(from = 2010, to = 2020, by = 1),
site_num = seq(from = 1, to= 2, by = .1))

trendAnalysis(df$site_num)
```
4. This returns summary statistics for the first 5 five USGS sites that are in the rbiWy_dfAll dataframe.
```{r, eval=TRUE}
trends(x = rbiWy_dfAll) %>% 
  head(5)
```




